{% extends "app/base.html" %}
{% load widget_tweaks %}
{% load static %}

{% block content %}

<div class="container index-wrap col-10">
	<div class="d-flex align-items-center">
		<h1 class="text-center col-sm-5 col-10">
			SkinType
			<span class="check">Check</span><br>
			<span class="skincare">Skin Care</span>
		</h1>
		<div class="line"></div>
		<div class="my-auto first-content col-sm-5 col-10">
			<p class="text-center">現在の肌状態やお悩みなど、チェックしていただくとあなたに最適なお手入れ方法と商品をご案内します。</p>
		</div>
	</div>
</div>

<div class="container index">
	<form method="post" id="skin">
		{% csrf_token %}
		<div class="bg-color-w cp_ipradio check-wrap">
			<h5 class="d-flex">
				<span class="question">Q1</span>
				<span class="puestion-title">肌はカサつきやすいですか？</span>
			</h5>
			<ul class="d-flex justify-content-center check-list row check input-btn" id="dry">
				<li class="list_item">
					<div></div>
					<label for="dry_1">
						<input type="radio" class="option-input" id="dry_1" name="skintype_dry" value="10">
						よくある
					</label>
				</li>
				<li class="list_item">
					<div></div>
					<label for="dry_2">
						<input type="radio" class="option-input" id="dry_2" name="skintype_dry" value="6">
						時々ある
					</label>
				</li>
				<li class="list_item">
					<div></div>
					<label for="dry_3">
						<input type="radio" class="option-input" id="dry_3" name="skintype_dry" value="3">
						あまりない
					</label>
				</li>
				<li class="list_item">
					<div></div>
					<label for="dry_4">
						<input type="radio" class="option-input" id="dry_4" name="skintype_dry" value="0">
						ない
					</label>
				</li>
			</ul>
			<div class="dotted2 dotted3"></div>
			<h5 class="d-flex">
				<span class="question">Q2</span>
				<span class="puestion-title">肌に脂っぽさやベタつきはありますか？</span>
			</h5>
			<ul class="d-flex justify-content-center check-list row check input-btn">
				<li class="list_item">
					<div></div>
					<label for="oily_1">
						<input type="radio" class="option-input" id="oily_1" name="skintype_oil" value="10">
						よくある
					</label>
				</li>
				<li class="list_item">
					<div></div>
					<label for="oily_2">
						<input type="radio" class="option-input" id="oily_2" name="skintype_oil" value="6">
						時々ある
					</label>
				</li>
				<li class="list_item">
					<div></div>
					<label for="oily_3">
						<input type="radio" class="option-input" id="oily_3" name="skintype_oil" value="3">
						あまりない
					</label>
				</li>
				<li class="list_item">
					<div></div>
					<label for="oily_4">
						<input type="radio" class="option-input" id="oily_4" name="skintype_oil" value="0">
						ない
					</label>
				</li>
			</ul>
			<div class="dotted2 dotted3"></div>
			<h5 class="d-flex">
				<span class="question">Q3</span>
				<span class="puestion-title">あなたの気になる肌悩みを順番に選んでください。</span>
			</h5>
			<ul class="d-flex justify-content-center check-list row input-btn">
				<li class="boxes list_item">
					<div></div>
					<label for="trouble1">
						<span class="check_order" id="0"></span>
						<input type="checkbox" id="trouble1" class="option-input">
						シワ
					</label>
				</li>
				<li class="boxes list_item">
					<div></div>
					<label for="trouble2">
						<span class="check_order" id="1"></span>
						<input type="checkbox" id="trouble2" class="option-input">
						シミ
					</label>
				</li>
				<li class="boxes list_item">
					<div></div>
					<label for="trouble3">
						<span class="check_order" id="2"></span>
						<input type="checkbox" id="trouble3" class="option-input">
						毛穴
					</label>
				</li>
				<li class="boxes list_item">
					<div></div>
					<label for="trouble4">
						<span class="check_order" id="3"></span>
						<input type="checkbox" id="trouble4" class="option-input">
						ニキビ
					</label>
				</li>
			</ul>
			<div class="dotted2 dotted3"></div>
			<input type="text" value="" id="target" name="trouble" hidden>
			<h5 class="d-flex">
				<span class="question">Q4</span>
				<span class="puestion-title">あなたの年代は？</span>
			</h5>
			<ul class="d-flex check-list check3 row input-btn">
				<li class="list_item">
					<div></div>
					<label for="age_1">
						<input type="radio" class="option-input" id="age_1" name="age" value="10">
						10代~20代
					</label>
				</li>
				<li class="list_item">
					<div></div>
					<label for="age_2">
						<input type="radio" class="option-input" id="age_2" name="age" value="30">
						30代~40代
					</label>
				</li>
				<li class="list_item">
					<div></div>
					<label for="age_3">
						<input type="radio" class="option-input" id="age_3" name="age" value="50">
						50代以上
					</label>
				</li>
			</ul>
			<div class="dotted2 dotted3"></div>
			<h5 class="d-flex">
				<span class="question">Q5</span>
				<span class="puestion-title">スキンケア1つの製品にかけるお金はいくらぐらいですか？</span>
			</h5>
			<ul class="d-flex check-list-last check5 row check input-btn">
				<li class="list_item">
					<div></div>
					<label for="price_1">
						<input type="radio" class="option-input" id="price_1" name="price" value="1000">
						1,000未満
					</label>
				</li>
				<li class="list_item">
					<div></div>
					<label for="price_2">
						<input type="radio" class="option-input" id="price_2" name="price" value="3000">
						1,000〜3,000円
					</label>
				</li>
				<li class="list_item">
					<div></div>
					<label for="price_3">
						<input type="radio" class="option-input" id="price_3" name="price" value="5000">
						3,000〜5,000円</li>
				</label>
				<li class="list_item">
					<div></div>
					<label for="price_4">
						<input type="radio" class="option-input" id="price_4" name="price" value="7000">
						5,000〜7,000円
					</label>
				</li>
				<li class="list_item">
					<div></div>
					<label for="price_5">
						<input type="radio" class="option-input" id="price_5" name="price" value="10000">
						7,000円以上
					</label>
				</li>
			</ul>
			<div class="check-btn d-flex justify-content-center">
				<button class="btn" type="submit">結果を見る...</button>
			</div>
		</div>
	</form>
</div>



<script>
	'use strict';


	// const skintype_dry = document.getElementsByName('skintype_dry');

	// skintype_dry.addEventListener('change', (event) => {
	// 	const result = document.querySelector('.result');
	// 	result.textContent = `${event.target.value}` ;
	// })






// {
	

// 	window.addEventListener('DOMContentLoaded',() => {

// 		document.getElementsByName('skintype_dry').forEach(
// 			dry => dry.addEventListener('change',
// 			d => console.log(d.target.value))
// 		)

// 		document.getElementsByName('skintype_oil').forEach(
// 			oily => oily.addEventListener('change',
// 			o => console.log(o.target.value))
// 		)

// 		document.getElementsByName('skintype_oil').forEach(
// 			oily => oily.addEventListener('change',
// 			o => console.log(o.target.value))
// 		)

// 		document.getElementsByName('skintype_oil').forEach(
// 			oily => oily.addEventListener('change',
// 			o => console.log(o.target.value))
// 		)
// 	})
// }










// {
// 	const getCookie = name => {
//         if (document.cookie && document.cookie !== '') {
//             for (const cookie of document.cookie.split(';')) {
//                 const [key, value] = cookie.trim().split('=');
//                 if (key === name) {
//                     return decodeURIComponent(value);
//                 }
//             }
//         }
// 	};
	
// 	const csrftoken = getCookie('csrftoken');

// 	const skin = document.getElementById('skin');
// 	skin.addEventListener('submit', e => {
// 		e.preventDefault();
// 		const url = '{% url "index" %}';
// 		const body = new URLSearchParams()
// 		body.append('skintype_dry', dry_1.value)
// 		body.append('skintype_oil', oily_4.value)
// 		body.append('price', price_3.value)
// 		body.append('age', age_2.value)
// 		body.append('trouble', target.value)

//         fetch(url, {
// 			method: 'POST',
// 			body: body,
//             headers: {
//                 'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8',
//                 'X-CSRFToken': csrftoken,
//             }
// 		}).then(response => {
// 			return response.json();
// 		}).then(response => {
			
// 		}).catch(error => {
// 			console.log(error);
//         });
// 	});

// }


// チェックボックス 
var order = [];

[].forEach.call(document.querySelectorAll('input[type="checkbox"]'), function (checkbox) {
	'use strict';
	checkbox.addEventListener('change', function () {
		var previousLi = checkbox.parentNode.parentNode.previousElementSibling;
		var index = 0;
		while (previousLi !== null) {
			previousLi = previousLi.previousElementSibling;
			index += 1;
		}

		if (checkbox.checked) {
			order.push(index);
		} else {
			order.splice(order.indexOf(index), 1);
		}

		document.getElementById("target").setAttribute("value", order);

		let check_order = document.getElementsByClassName('check_order');
		
		for(var i = 0; i < check_order.length; i++) {
			check_order[i].innerHTML = ""
		}
		
		for (let i = 0; i < order.length; i++) {
			document.getElementById(order[i]).innerHTML = i + 1;
		}

		for (let i = 0; i < order.length; i++) {
			document.getElementById(order[i]).setAttribute("value", i+1);
		}
	});
});
</script>
{% endblock %}